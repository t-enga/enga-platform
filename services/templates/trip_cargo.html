{% extends 'base.html' %}
{% block content %}

<main class="container">
    <div class="row">
        <div class="text-center mt-2">
            <h1 class="d-flex col-md-6 offset-md-3 card card-body bg-success bg-gradient text-white text-emphasis-primary">Carga de servicios</h1>
        </div>
        <div class="col-md-6 offset-md-3 text-center card" >
            <div class="mb-3 mt-3">
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalCargo1">Carga 1</button>
                <div class="modal fade" id="modalCargo1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modal1Label">Datos de Primera Carga</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form method="POST" action="{% url 'drivers_cargo' id_service=trip.pk %}">
                                    {% csrf_token %}
                                    <p>Por favor ingrese los datos de la primer carga</p>
                                    <br>
                                    <label for="form_cargo1.cargo1_kms">Kilometros al iniciar carga</label>
                                    {{ form_cargo1.cargo1_kms }}
                                    <label for="id_cargo1_collected">Animales cargados</label>
                                    <br>
                                    {{ form_cargo1.cargo1_collected }}

                                    <input type="hidden" id="cargo1_coordinates" name="cargo1_coordinates" value="">
                                    <br>
                                    <button type="submit" name="submit_cargo1" class="btn btn-warning">Guardar</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div>
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalCargo2">Carga 2</button>
                <div class="modal fade" id="modalCargo2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modal2Label">Datos de Segunda Carga</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form method="POST" action="{% url 'drivers_cargo' id_service=trip.pk %}">
                                    {% csrf_token %}
                                    <p>Por favor ingrese los datos de la segunda carga</p>
                                    <br>
                                    <label for="form_cargo2.cargo2_kms">Kilometros al iniciar carga</label>
                                    {{ form_cargo2.cargo2_kms }}
                                    <label for="id_cargo2_collected">Animales cargados</label>
                                    {{ form_cargo2.cargo2_collected }}
                                    <input type="hidden" id="cargo2_coordinates" name="cargo2_coordinates" value="">
                                    <br>
                                    <button type="submit" name="submit_cargo2" class="btn btn-warning">Guardar</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-3 mb-3">
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalCargo3">Carga 3</button>
                <div class="modal fade" id="modalCargo3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modal3Label">Datos de Tercer Carga</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form method="POST" action="{% url 'drivers_cargo' id_service=trip.pk %}">
                                    {% csrf_token %}
                                    <p>Por favor ingrese los datos de la Tercer carga</p>
                                    <br>
                                    <label for="form_cargo3.cargo3_kms">Kilometros al iniciar carga</label>
                                    {{ form_cargo3.cargo3_kms }}
                                    <label for="id_cargo3_collected">Animales cargados</label>
                                    {{ form_cargo3.cargo3_collected }}
                                    <input type="hidden" id="cargo3_coordinates" name="cargo3_coordinates" value="">
                                    <br>
                                    <button type="submit" name="submit_cargo3" class="btn btn-warning">Guardar</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <script>
        document.getElementById('id_cargo1_collected').addEventListener('input', function() {
            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    var coordinates = position.coords.latitude + ', ' + position.coords.longitude;
                    document.getElementById('cargo1_coordinates').value = coordinates;
                });
            }
        });

        document.getElementById('id_cargo2_collected').addEventListener('input', function() {
            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    var coordinates = position.coords.latitude + ', ' + position.coords.longitude;
                    document.getElementById('cargo2_coordinates').value = coordinates;
                });
            }
        });

        document.getElementById('id_cargo3_collected').addEventListener('input', function() {
            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    var coordinates = position.coords.latitude + ', ' + position.coords.longitude;
                    document.getElementById('cargo3_coordinates').value = coordinates;
                });
            }
        });


    </script>


</main>

{% endblock %}